<head>
  <link href="â–ºun.png" rel="shortcut icon">
  <title>Vun-Video</title>
  <script src="plyr-citation.js"></script>
</head>
<video id="player" playsinline controls data-poster="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.jpg">
  <source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-1080p.mp4" type="video/mp4" size="1080" default>
  <!-- source src="" type="video/mp4" size="" default -->
</video>
<script src="plyr-main.min.js"></script>
<script>
  /* var video = document.getElementById('player');
  var xhr = new XMLHttpRequest();
  var url = 'https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-1080p.mp4';
  xhr.open("GET", url, true);
  xhr.responseType = "blob";
  xhr.onload = function () {
    var blob = this.response;
    console.log(blob);
    video.src = URL.createObjectURL(blob);
    video.onload = function () {
      URL.revokeObjectURL(video.src)
    };
  }
  xhr.send(); */

  var video = document.querySelector('video');
  var mediaSource = new MediaSource;
  video.src = URL.createObjectURL(mediaSource);
  mediaSource.addEventListener('sourceopen', sourceOpen)

  function sourceOpen () {
    var mediaSource = this;
    var sourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
    sourceBuffer.addEventListener('updateend', function () {
      mediaSource.endOfStream();
      video.play();
    });
    sourceBuffer.appendBuffer(buf); // buf is the arraybuffer to store the video data
  };
</script>
